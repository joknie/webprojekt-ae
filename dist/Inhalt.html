<!DOCTYPE html>
<html lang="en">
  <head> 
    <meta charset="UTF-8">
    <title>Webprojekt Johannes Knieling (FIAE14)</title>
    <link rel="stylesheet" href="Index.css">
  </head>
  <body>
    <header>
      <h1 class="invert">Webprojekt</h1>
      <h2>Johannes Knieling, FIAE14</h2>
    </header>
    <nav> <a href="Index.html">Ãœbersicht</a><a href="PAP.html">Programmablaufplan</a><span class="active">Template Engine Pug</span><a href="Pug.html">Codebeispiele Pug</a>
    </nav>
    <main>
      <p><span class="bold">Hinweis:</span> Auf dieser Seite befinden sich mehrere Links, die 
        auf externe Seiten verweisen. Diese sind mit dem Symbol &#8618; 
        gekennzeichnet und werden in einem neuen Tab oder Fenster ge&ouml;ffnet. 
        F&uuml;r die verlinkten Seiten und deren Inhalte kann keine 
        Verantwortung &uuml;bernommen werden.
      </p>
      <h3>PUG als HTML-Pr&auml;prozessor</h3>
      <p>
        Die Arbeit mit HTML erfordert in der Regel viel Tippen und viele 
        Sonderzeichen, etwa bei der Eingabe von HTML-Tags und -Entit&auml;ten. 
        Es gibt viele Ans&auml;tze, diese Arbeit zu vereinfachen und den Code 
        lesbarer zu machen. Eine davon wird hier vorgestellt.
        
      </p>
      <div class="center"><img class="pad-the-dog" src="img/pug.png"/></div>
      <p class="caption">Abbildung 1 - Das Logo von Pug zeigt einen Mops (engl. pug) 
        <br/> Quelle: 
        <a href="https://github.com/pugjs/pug-logo/blob/master/PNG/pug-final-logo_-colour-128.png">&#8618;pug-logo Github-Repository von pugjs</a>
        
      </p>
      <p>
        Die 
        <a href="https://github.com/pugjs/pug" target="_blank">&#8618;Template Engine <span class="name">Pug</span></a>
        bietet eine vereinfachte Markupsprache, die in HTML umgewandelt werden 
        kann. Dazu verwendet sie die JavaScript-Laufzeitumgebung 
        <span class="name">Node.js</span>, mit der ein:e Benutzer:in bei der Benutzung von
        <span class="name">Pug</span> aber nicht notwendigerweise interagieren muss.
        
      </p>
      <p>Neben dem vereinfachten Markup bietet <span class="name">Pug</span> Funktionen, die 
        in HTML nicht oder nur unter Einbindung von JavaScript zu realisieren 
        sind. Dazu geh&ouml;ren Variablen, Verzweigungen und Iterationen.
        
      </p>
      <p><span class="name">Pug</span> bietet zudem M&ouml;glichkeiten, Code aus anderen 
        Dateien einzubinden. Dadurch soll das DRY-Prinzip (&#8222;Don&acute;t 
        Repeat Yourself&#8220;) auch in HTML anwendbar gemacht werden.
        
      </p>
      <h4>Format des Pug-Markups</h4>
      <p><span class="name">Pug</span> vereinfacht das Markup von HTML durch den Verzicht auf 
        die spitzen Klammern und schlie&szlig;ende Tags. Attribute werden Tags 
        in einfachen Klammern hinzugef&uuml;gt und Klassen k&ouml;nnen in einer 
        Punktnotation angef&uuml;gt werden.
        
      </p>
      <p>Der Beginn des vorangegangenen Abschnitts sieht in <span class="name">Pug</span> zum 
        Beispiel so aus:
        
      </p>
      <pre>h3 PUG als HTML-Pr&auml;prozessor

p.
  Die Arbeit mit HTML erfordert in der Regel viel Tippen und viele 
  Sonderzeichen, etwa bei der Eingabe von HTML-Tags und -Entit&auml;ten. 
  Es gibt viele Ans&auml;tze, diese Arbeit zu vereinfachen und den Code 
  lesbarer zu machen. Eine davon wird hier vorgestellt.

div.center: img.pad-the-dog(src='img/pug.png')/
p.caption.
  Abbildung #{images++} - Das Logo von Pug zeigt einen Mops (engl. pug) 
  #[br/] Quelle: 
  #[a(href="...") &amp;#8618;pug-logo Github-Repository von pugjs]
</pre>
      <p class="caption">Codeausschnitt 1 - Ein Beispiel f&uuml;r Formatierung in Pug
        <br/> Die Linkadresse wurde zu Gunsten der Lesbarkeit entfernt.
        
      </p>
      <p>
        In der ersten Zeile wird eine &Uuml;berschrift definiert. Der 
        <span class="code">h3</span>-Tag steht ohne Klammern am Anfang der Zeile und 
        ben&ouml;tigt keinen schlie&szlig;enden Tag am Ende. Der Inhalt des Tags 
        wird im Anschluss ausgeschrieben.
        
      </p>
      <p>Der Inhalt des folgenden <span class="code">p</span>-Tags erstreckt sich &uuml;ber 
        mehrere Zeilen. Dies wird durch die Schreibweise <span class="code">p.</span> 
        angezeigt. Der Inhalt des Tags muss entsprechend einger&uuml;ckt 
        werden.
        
      </p>
      <p>Dann wird das Bild eingef&uuml;gt. Dem <span class="code">img</span>-Tag wird in 
        Klammern das <span class="code">src</span>-Attribut &uuml;bergeben. Zudem wird mit 
        der Punktnotation die Klasse <span class="code">pad-the-dog</span> zugewiesen, die 
        Padding um das Bild herum hinzuf&uuml;gt, da sonst der Rahmen, der im 
        CSS der Seite f&uuml;r Bilder definiert ist, zu nahe am Bildinhalt 
        w&auml;re, was nicht gut aussieht.
        
      </p>
      <p>Vor dem Bild wird ein <span class="code">div</span> mit der Klasse 
        <span class="code">center</span> definiert, das daf&uuml;r sorgt, dass das Bild
        korrekt zentriert wird. Es dient auch als Beispiel f&uuml;r &#8222;Block 
        Expansion&#8220;, eine vereinfachte Schreibweise f&uuml;r verschachtelte
        Tags, die mit Doppelpunkt und Leerzeichen aneinander gef&uuml;gt werden 
        k&ouml;nnen.
        
      </p>
      <h4>Interpolation</h4>
      <p>
        Im Codeausschnitt ist auch zu sehen, wie Tags innerhalb 
        eines ansonsten als Text behandelten Blocks verwendet werden 
        k&ouml;nnen. Mit dem Konstrukt 
        <span class="code">#[&lt;Tag&gt; &lt;Inhalt&gt;</span>] wird angezeigt, dass dieser
        Bereich beim Umwandeln in HTML als Tag interpoliert werden soll.
        
      </p>
      <p>
        Mit dem Mittel der Interpolation k&ouml;nnen auch zuvor definierte 
        Variablen in Texte eingef&uuml;gt werden. Dazu wird das sehr &auml;hnliche
        Konstrukt <span class="code">#{&lt;Variablenname&gt;}</span> verwendent. In der 
        Beschriftung des Bildes wird damit die Nummerierung des Bildes realisiert. 
        Am Beginn des Dokuments (nicht Teil des Codeausschnitts) wurde 
        <span class="code">images</span> mit dem Wert <span class="code">1</span> initialisiert. Hier wird 
        dieser Wert eingef&uuml;gt und postinkrementiert, so dass bei der 
        n&auml;chsten Verwendung oder beim Einf&uuml;gen eines Bildes (mit 
        entsprechender Verwendung der Variablen in der Beschriftung) jeweils korrekt 
        gez&auml;hlt w&uuml;rde. Diese Funktion wurde auch f&uuml;r die 
        Codeausschnitte auf dieser Seite verwendet, wo sie mehr als nur 
        Beispielcharakter hat, da mehrere davon verwendet wurden.
        
      </p>
      <h4>Vererbung</h4>
      <p>Templates k&ouml;nnen in <span class="name">Pug</span> andere Templates erweitern 
        und deren Inhalt erben. In einer vererbenden Template k&ouml;nnen 
        Bl&ouml;cke definiert werden, die entweder mit einen Standardinhalt 
        gef&uuml;llt oder in der Kindtemplate definiert und ersetzt werden 
        k&ouml;nnen.
        
      </p>
      <p>
        Ein Verwendungszweck daf&uuml;r ist das Erstellen einer Template 
        f&uuml;r das Seitenlayout, in die der eigentliche, von Seite zu Seite
        variable Inhalt als Block aus einer anderen Datei eingef&uuml;gt wird.
        
      </p>
      <p>Diese Seite und <a href="Pug.html">die Codebeispiele</a> werden beide aus
        einer gemeinsamen Template abgeleitet. Diese enth&auml;lt das 
        HTML-Ger&uuml;st mit einem Platzhalter f&uuml;r den Inhalt. Die Dateien, aus 
        denen die genannten Seiten generiert werden, erweitern diese lediglich.
        
      </p>
      <pre>extends _templates/main.pug

block content
</pre>
      <p class="caption">Codeausschnitt 2 - Die ersten Zeilen von Inhalt.pug</p>
      <p>
        In der ersten Zeile wird die Vererbung der Haupttemplate festgelegt. Die 
        Anweisung <span class="code">block content</span> erzeugt einen Codeblock mit dem Namen
        <span class="code">content</span>, der an der Stelle, wo er in der Haupttemplate erwartet 
        wird, eingesetzt wird.
        
      </p>
      <pre>main
  block content
    p You should never see this!  
</pre>
      <p class="caption">Codeausschnitt 3 - Der Teil von main.pug, an dem der Block
        content eingef&uuml;gt wird
        
      </p>
      <p>
        In diesem Ausschnitt ist auch die M&ouml;glichkeit gezeigt, Defaultwerte
        f&uuml;r Bl&ouml;cke anzugeben. Ist in einer Datei, die 
        <span class="code">main.pug</span> erbt, kein Block mit dem Namen <span class="code">content</span> 
        definiert, w&uuml;rde der Text &#8222;You should never see this!&#8220;
        angezeigt.
        
      </p>
      <h4>Includes</h4>
      <p>
        Mit dem Befehl &#8222;include&#8220; kann in eine 
        <span class="code">.pug</span>-Datei der Inhalt einer anderen <span class="name">Pug</span>-Datei 
        eingbunden werden. Dieser wird an der jeweiligen Stelle eingef&uuml;gt. 
        Dadurch k&ouml;nnen Seitenbausteine gem&auml;&szlig; dem DRY-Prinzip 
        wiederverwendet werden.
        
      </p>
      <p>
        Dies macht insbesondere f&uuml;r immer wiederkehrende Teile des 
        Seitendesigns Sinn. So wurden der Kopfteil, die Navigationsleiste und die 
        Fu&szlig;zeile jeweils als <span class="code">include</span> in einer seperaten Datei
        realisiert und in die Template <span class="code">main.pug</span> eingebunden.
        
      </p>
      <pre>header
  include ../_includes/Header.pug

nav  
  include ../_includes/Nav.pug
</pre>
      <p class="caption">Codeausschnitt 4 - Einbinden von Kopfteil und 
        Navigationsleiste in der Template main.pug
        
      </p>
      <h4>Variablen, Iteration und Verzweigungen </h4>
      <p>
        Eine interessante Funktionalit&auml;tserweiterung gegen&uuml;ber HTML
        ist die M&ouml;glichkeit, Programmierfunktionen wie Variablen,
        Verzweigungen und Iterationen direkt in der <span class="code">.pug</span>-Datei zu 
        verwenden.
        
      </p>
      <p>Ein Beispiel f&uuml;r den Einsatz dieser Funktionen :</p>
      <table>
        <tr>         
          <td>1</td>
          <td class="last-in-row">Alice</td>
        </tr>
        <tr>         
          <td>2</td>
          <td class="last-in-row">Bob</td>
        </tr>
        <tr>         
          <td>3</td>
          <td class="last-in-row">Charlie</td>
        </tr>
        <tr>         
          <td>4</td>
          <td class="last-in-row">Dave</td>
        </tr>
        <tr>         
          <td>5</td>
          <td class="last-in-row">Eve</td>
        </tr>
        <tr>         
          <td class="last-in-col">6</td>
          <td class="last-in-row last-in-col">Frank</td>
        </tr>
      </table>
      <p class="caption">Tabelle 1 - Erzeugen einer Tabelle aus Daten</p>
      <p>
        An dieser Tabelle ist zun&auml;chst nichts ungew&ouml;hnliches zu erkennen. 
        Auch ein Blick in den Seitenquelltext zeigt nur eine herk&ouml;mmliche 
        HTML-Tabelle. In der <span class="name">Pug</span>-Template sieht diese Tabelle 
        allerdings so aus:
        
      </p>
      <pre>- var i = 1
- var list = ["Alice", "Bob", "Charlie", "Dave", "Eve", "Frank"]

table
  each item in list
    tr
      if i==list.length
        td.last-in-col=i++
        td.last-in-row.last-in-col=item
      else
        td=i++
        td.last-in-row=item
</pre>
      <p class="caption">Codeausschnitt 5 - Erzeugen einer Tabelle aus Daten </p>
      <p>
        Statt einer statischen Definition der Tabelle werden in diesem Code aus
        dem Array <span class="code">list</span> (unter Zuhilfenahme einer 
        Z&auml;hlvariable <span class="code">i</span>) die Tabellenzeilen generiert. Dies
        erlaubt das einfache Entfernen oder Hinzuf&uuml;gen von Eintr&auml;gen.
        
      </p>
      <p>
        Auch eine Verzweigung ist hier zu sehen. Die letzte Zeile der Tabelle 
        muss aufgrund der CSS-Definitionen als solche ausgezeichnet werden. Dies 
        wird durch einen Vergleich der Z&auml;hlvariablen mit der L&auml;nge des
        Arrays erreicht.
        
      </p>
      <p>
        Zum Vergleich die Tabelle in HTML so wie der gezeigte Code sie erzeugt.
        Neben der Lesbarkeit soll dies auch die einfachere Anpassbar- und 
        Erweiterbarkeit des Baus der Tabelle mit <span class="name">Pug</span> demonstrieren.
        
      </p>
      <pre>&lt;table&gt;
  &lt;tr&gt;         
    &lt;td&gt;1&lt;/td&gt;
    &lt;td class="last-in-row"&gt;Alice&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;         
    &lt;td&gt;2&lt;/td&gt;
    &lt;td class="last-in-row"&gt;Bob&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;         
    &lt;td&gt;3&lt;/td&gt;
    &lt;td class="last-in-row"&gt;Charlie&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;         
    &lt;td&gt;4&lt;/td&gt;
    &lt;td class="last-in-row"&gt;Dave&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;         
    &lt;td&gt;5&lt;/td&gt;
    &lt;td class="last-in-row"&gt;Eve&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;         
    &lt;td class="last-in-col"&gt;6&lt;/td&gt;
    &lt;td class="last-in-row last-in-col"&gt;Frank&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
</pre>
      <p class="caption">Codeausschnitt 6 - Die Tabelle in HTML </p>
      <h4>Weitere Funktionen</h4>
      <p>Weitere Funktionen, die <span class="name">Pug</span> bereitstellt, die aber im 
        Rahmen dieses Projekts nicht eingesetzt wurden, sollen trotzdem kurz 
        angeschnitten werden.
        
      </p>
      <h5>Mixins</h5>
      <p>
        Ein wiederverwendbarer Code-Block innerhalb einer Datei wird Mixin
        genannt. Dieser wird einmal definiert und kann dann beliebig oft
        wiederverwendet werden.
        
      </p>
      <div class="flex-container">
        <div>
          <p>PUG Template:</p>
          <pre>//- Declaration
mixin list
ul
  li foo
  li bar
  li baz
//- Use
+list
+list            </pre>
        </div>
        <div>
          <p>Erzeugtes HTML:</p>
          <pre>&lt;ul&gt;
  &lt;li&gt;foo&lt;/li&gt;
  &lt;li&gt;bar&lt;/li&gt;
  &lt;li&gt;baz&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
  &lt;li&gt;foo&lt;/li&gt;
  &lt;li&gt;bar&lt;/li&gt;
  &lt;li&gt;baz&lt;/li&gt;
&lt;/ul&gt;
</pre>
        </div>
      </div>
      <p class="caption">Codebeispiel 7 - Mixin zum Erzeugen einer Liste<br>
        Quelle: 
        <a href="https://pugjs.org/language/mixins.html">&#8618;Pug Dokumentation: Mixins</a>
        
      </p>
      <p>Durch den zweifachen Aufruf von <span class="code">+list</span>; am Ende des 
        <span class="name">Pug</span>-Ausschnitts werden bei der Konversion zu HTML zwei 
        Listen erzeugt.
        
      </p>
      <h5>Filter</h5>
      <p>
        Eine komplexere Funktion sind Filter, mit denen Code in anderen
        Programmiersprachen in eine <span class="name">Pug</span>-Template eingef&uuml;gt 
        werden kann. Dabei ist zu beachten, das dieser Code dann beim 
        Kompilieren der Template in eine HTML-Datei interpretiert wird. Deshalb 
        kann mit ihnen allein kein dynamischer Inhalt erzeugt werden.
        
      </p>
      <h5>Zugriff auf externe Daten</h5>
      <p>
        Mittels Filtern oder Inline-Code ist es auch m&ouml;glich auf Daten in
        seperaten Dateien oder eine Datenbank zuzugreifen. Diese k&ouml;nnen dann
        verwendet werden, um Inhalte zu erstellen. Das oben gezeigte Beispiel einer 
        Tabelle w&auml;re bei gr&ouml;&szlig;erer Datenmenge ein Kandidat f&uuml;r 
        die Umsetzung mit externen Daten.
        
      </p>
      <h4>Umwandlung von Pug in HTML</h4>
      <p>Um eine in <span class="name">Pug</span> geschriebene Template in eine HTML-Datei, 
        die ein Browser anzeigen kann, umzuwandeln, gibt es mehrere 
        M&ouml;glichkeiten:
        
      </p>
      <ol>
        <li>Da <span class="name">Pug</span> auf <span class="name">Node.js</span> basiert, kann es, wenn 
          <span class="name">Node.js</span> auf dem System installiert ist, &uuml;ber 
          entsprechende Aufrufe des Node Package Managers <span class="name">npm</span> 
          installiert und damit umgewandelt werden.
        </li>
        <li>
          Eine Option, die zum Experimentieren einl&auml;dt, sind 
          Online-Konverter, die oft auch eine Umwandlung in Echtzeit 
          bereitstellen. Beispiele:
          <ul>
            <li><a href="https://pug2html.com/" target="_blank">&#8618;Pug2HTML</a> </li>
            <li><a href="https://pughtml.com/" target="_blank">&#8618;Pug-HTML</a></li>
            <li><a href="https://www.cssportal.com/pug-to-html/" target="_blank">&#8618;Konverter bei {CSS}Portal</a></li>
          </ul>
        </li>
        <li>
          Plugins in einer IDE k&ouml;nnen ebenfalls Konvertierungen
          durchf&uuml;hren. F&uuml;r dieses Projekt wurde das Plugin 
          <a class="name" href="https://marketplace.visualstudio.com/items?itemName=Wscats.eno" target="_blank">&#8618;Compile Hero Pro</a>
          f&uuml;r <span class="name">Visual Studio Code</span> verwendet.
          
        </li>
      </ol>
      <h4>Fazit  </h4>
      <p>Die Arbeit mit <span class="name">Pug</span> vereinfacht das Erstellen von Webseiten. 
        Der Wegfall der HTML-typischen spitzen Klammern und der 
        schlie&szlig;enden Tags erh&ouml;ht die Arbeitsgeschwindigkeit. 
        Die Strukturierung durch Einr&uuml;ckungen erzwingt eine konsequent 
        ordentliche Formatierung. Beides zusammen erh&ouml;ht die Lesbarkeit 
        des Quelltexts gegen&uuml;ber HTML.
        
      </p>
      <p>Die Modularisierung mittels <span class="code">include</span> und Vererbung 
        erm&ouml;glicht eine Wiederverwendung von Seitenbausteinen ohne copy/paste.
        Zudem erlaubt es eine einfachere und weniger fehleranf&auml;llige 
        Bearbeitung solcher Bausteine.
        
      </p>
      <p>
        In diesem Projekt wurden die M&ouml;glichkeiten, die sich durch die
        zusa&auml;tzlichen Funktionen, die <span class="name">Pug</span> bietet, bestenfalls 
        angedeutet. Neben der M&ouml;glichkeit, eine Website unter 
        Ber&uuml;cksichtigung des DRY-Prinzips aufzubauen, er&ouml;ffnet die Arbeit 
        mit Daten einen sehr gro&szlig;en Spielraum, von dem das oben gezeigte 
        Beispiel des Generierens einer Tabelle oder der Navigationsleiste 
        (vorgestellt als eines der <a href="Pug.html">Codebeispiele</a>) nur ein 
        winziger Teil ist.
        
      </p>
      <p>
        Dieses Projekt hat auch ein
        <a href="https://github.com/joknie/webprojekt-ae" target="_blank">&#8618;ein GitHub-Repo</a>.
        Dort k&ouml;nnen die <span class="code">Pug</span>-Dateien, die nicht zu den 
        abgegebenen Dateien geh&ouml;ren, begutachtet werden.
      </p>
    </main>
    <footer>
      <p class="invert">&copy; 2022 Johannes Knieling</p>
    </footer>
  </body>
</html>